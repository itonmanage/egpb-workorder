module.exports=[52356,a=>{"use strict";async function b(a,c,d,e=!1){try{let b=new FormData;d.forEach(a=>b.append("file",a)),b.append("ticketId",c),b.append("isAdminUpload",String(e)),"engineer"===a&&b.append("type","engineer");let f=await fetch("/api/upload",{method:"POST",body:b}),g=await f.json();if(!f.ok||!g.success)throw Error(g.error||"Upload failed");let h=(g.data?.images||[]).map(a=>a.url);return{success:!0,imageUrls:h}}catch(a){return console.error("Error uploading images:",a),{success:!1,imageUrls:[],error:a instanceof Error?a.message:"Unknown error occurred"}}}async function c(a,b){try{let c="engineer"===a?`/api/engineer-tickets/${b}`:`/api/tickets/${b}`,d=await fetch(c);if(!d.ok)throw Error("Failed to fetch ticket images");let e=await d.json();if(!e.success||!e.data)throw Error("Invalid response format");let f=e.data.ticket||e.data;return(f?.images||[]).map(a=>{let b=a.originalName||a.imageUrl?.split("/")?.pop()||"image.jpg";return{...a,is_completion_image:a.isCompletion,is_admin_upload:a.isCompletion,ticket_id:a.ticketId,image_url:a.imageUrl,image_name:b,file_name:b,file_path:a.imageUrl,created_at:a.createdAt}})}catch(a){return console.error("Error fetching images:",a),[]}}async function d(a,b,c){try{let d=await fetch(`/api/upload?imageId=${b}&filePath=${encodeURIComponent(c)}${"engineer"===a?"&type=engineer":""}`,{method:"DELETE"});if(!d.ok){let a=await d.json();throw Error(a.error||"Delete failed")}return{success:!0}}catch(a){return console.error("Error deleting image:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async function e(a,c,d=!1){return b("it",a,c,d)}async function f(a){return c("it",a)}async function g(a,b){return d("it",a,b)}async function h(a,c,d=!1){return b("engineer",a,c,d)}async function i(a){return c("engineer",a)}async function j(a,b){return d("engineer",a,b)}a.s(["deleteEngineerTicketImage",()=>j,"deleteImage",()=>d,"deleteTicketImage",()=>g,"getEngineerTicketImages",()=>i,"getImages",()=>c,"getTicketImages",()=>f,"uploadEngineerTicketImages",()=>h,"uploadImages",()=>b,"uploadTicketImages",()=>e])}];

//# sourceMappingURL=lib_imageUpload_ts_8f404672._.js.map