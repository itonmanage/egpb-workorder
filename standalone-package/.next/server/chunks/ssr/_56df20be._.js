module.exports=[23312,a=>{"use strict";a.s(["Bell",()=>b],23312);let b=(0,a.i(70106).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},72692,a=>{"use strict";a.s(["Menu",()=>b],72692);let b=(0,a.i(70106).default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},70448,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(72131),d=a.i(23312),e=a.i(33508);function f(){let[a,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(0),k=(0,c.useRef)(null),l=(0,c.useRef)(null);(0,c.useEffect)(()=>{m()},[]),(0,c.useEffect)(()=>{let a=()=>{let b=new EventSource("/api/notifications/sse");k.current=b,b.onopen=()=>{console.log("SSE connected")},b.onmessage=a=>{try{let b=JSON.parse(a.data);"new_notification"===b.type&&m()}catch(a){console.error("SSE parse error:",a)}},b.onerror=()=>{console.log("SSE error, reconnecting..."),b.close(),setTimeout(a,5e3)}};return a(),()=>{k.current&&k.current.close()}},[]),(0,c.useEffect)(()=>{let b=a=>{l.current&&!l.current.contains(a.target)&&f(!1)};return a&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[a]);let m=async()=>{try{let a=await fetch("/api/users/notifications?limit=10"),b=await a.json();b.success&&(h(b.data.notifications),j(b.data.unreadCount))}catch(a){console.error("Fetch notifications error:",a)}},n=async a=>{try{await fetch(`/api/users/notifications/${a}`,{method:"PATCH"}),m()}catch(a){console.error("Mark as read error:",a)}},o=async()=>{try{await fetch("/api/users/notifications/mark-all-read",{method:"POST"}),m()}catch(a){console.error("Mark all as read error:",a)}};return(0,b.jsxs)("div",{className:"relative",ref:l,children:[(0,b.jsxs)("button",{onClick:()=>f(!a),className:"relative p-2 hover:bg-green-50 rounded-xl transition-all duration-300 group",children:[(0,b.jsx)(d.Bell,{size:20,className:"text-gray-700 group-hover:text-green-600 transition-colors"}),i>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:i>9?"9+":i})]}),a&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 max-h-[600px] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),(0,b.jsx)("button",{onClick:()=>f(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(e.X,{size:18,className:"text-gray-500"})})]}),g.length>0&&i>0&&(0,b.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 bg-gray-50 border-b border-gray-200",children:[(0,b.jsxs)("span",{className:"text-xs text-gray-600",children:[i," unread"]}),(0,b.jsx)("button",{onClick:o,className:"text-xs text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"Mark all as read"})]}),(0,b.jsx)("div",{className:"overflow-y-auto flex-1",children:g.length>0?(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:g.map(a=>(0,b.jsx)("button",{onClick:()=>(a=>{if(a.read||n(a.id),a.ticketId){let b="ENGINEER"===a.ticketType?`/dashboard/engineer/ticket/${a.ticketId}`:`/dashboard/ticket/${a.ticketId}`;window.location.href=b}})(a),className:`w-full text-left p-4 transition-colors ${a.read?"bg-white hover:bg-gray-50":"bg-blue-50 hover:bg-blue-100"}`,children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${a.read?"bg-gray-300":"bg-blue-500"}`}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:`text-sm ${a.read?"text-gray-600":"text-gray-900 font-medium"}`,children:a.message}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:(a=>{let b=new Date(a),c=b.getHours().toString().padStart(2,"0"),d=b.getMinutes().toString().padStart(2,"0");return`${c}:${d}`})(a.createdAt)})]})]})},a.id))}):(0,b.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,b.jsx)(d.Bell,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No notifications"})]})})]})]})}},96973,a=>{"use strict";a.s(["default",()=>k],96973);var b=a.i(87924),c=a.i(72131),d=a.i(90669),e=a.i(70106);let f=(0,e.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var g=a.i(5784);let h=(0,e.default)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);var i=a.i(24669),j=a.i(64600);function k({username:a,userRole:e,onLogout:k,onFilterMyTickets:l}){let[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)("stats"),u=a=>a.substring(0,2).toUpperCase();(0,c.useEffect)(()=>{m&&(v(),w())},[m]);let v=async()=>{try{let a=await fetch("/api/users/stats"),b=await a.json();b.success&&p(b.data)}catch(a){console.error("Fetch stats error:",a)}},w=async()=>{try{let a=await fetch("/api/users/activity?limit=5"),b=await a.json();b.success&&r(b.data.activities)}catch(a){console.error("Fetch activities error:",a)}};return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>n(!m),className:"flex items-center gap-2 p-2 hover:bg-green-50 rounded-xl transition-all duration-300 group",children:[(0,b.jsx)("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white font-bold text-sm shadow-md group-hover:shadow-lg transition-shadow",children:u(a)}),(0,b.jsx)(g.ChevronDown,{size:16,className:`transition-transform duration-300 ${m?"rotate-180":""}`})]}),m&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 animate-fadeIn",onClick:()=>n(!1)}),(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-green-100 z-50 overflow-hidden animate-slideDown",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-4 text-white",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center text-white font-bold text-lg",children:u(a)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-lg",children:a}),(0,b.jsx)("p",{className:"text-sm text-green-100",children:j.ROLE_LABELS[e]||e})]})]})}),(0,b.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,b.jsxs)("button",{onClick:()=>t("stats"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${"stats"===s?"text-green-600 border-b-2 border-green-600 bg-green-50":"text-gray-600 hover:text-green-600 hover:bg-gray-50"}`,children:[(0,b.jsx)(i.TrendingUp,{size:16,className:"inline mr-1"}),"Stats"]}),(0,b.jsxs)("button",{onClick:()=>t("activity"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${"activity"===s?"text-green-600 border-b-2 border-green-600 bg-green-50":"text-gray-600 hover:text-green-600 hover:bg-gray-50"}`,children:[(0,b.jsx)(d.Activity,{size:16,className:"inline mr-1"}),"Activity"]})]}),(0,b.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:["stats"===s&&o&&(0,b.jsx)("div",{className:"p-4 space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("button",{onClick:()=>{l&&(l(),n(!1))},className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-3 rounded-xl border border-blue-100 hover:shadow-md hover:scale-105 transition-all cursor-pointer text-left",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"Created"}),(0,b.jsx)(h,{size:14,className:"text-blue-500"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:o.totalCreated}),(0,b.jsx)("span",{className:"text-xs text-blue-500 mt-1 block",children:"Click to filter"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-xl border border-green-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"Completed"}),(0,b.jsx)(i.TrendingUp,{size:14,className:"text-green-500"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-700",children:o.completedThisMonth}),(0,b.jsx)("span",{className:"text-xs text-green-600",children:"This month"})]})]})}),"activity"===s&&(0,b.jsx)("div",{className:"p-2",children:q.length>0?(0,b.jsx)("div",{className:"space-y-1",children:q.map(a=>(0,b.jsx)("div",{className:"p-3 hover:bg-gray-50 rounded-lg transition-colors",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-800",children:a.action}),a.ticketNumber&&(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Ticket: ",a.ticketNumber]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:(a=>{let b=new Date(a),c=b.getHours().toString().padStart(2,"0"),d=b.getMinutes().toString().padStart(2,"0");return`${c}:${d}`})(a.createdAt)})]})]})},a.id))}):(0,b.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,b.jsx)(d.Activity,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"No recent activity"})]})})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 p-2",children:(0,b.jsxs)("button",{onClick:k,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-colors font-medium",children:[(0,b.jsx)(f,{size:18}),"Logout"]})})]})]})]})}},15618,87532,a=>{"use strict";a.s(["Plus",()=>c],15618);var b=a.i(70106);let c=(0,b.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Search",()=>d],87532);let d=(0,b.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},60246,a=>{"use strict";a.s(["Users",()=>b],60246);let b=(0,a.i(70106).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},33508,a=>{"use strict";a.s(["X",()=>b],33508);let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},64600,a=>{"use strict";a.s(["ROLE_LABELS",()=>c,"ROLE_TO_DEPARTMENT_MAP",()=>b]);let b={EXE_AC:"Executive & Accounting",FB:"F&B",FRONT_OFFICE:"Front Office",HK:"Housekeeping",HR:"HR",JURISTIC:"Juristic",KITCHEN:"Kitchen",RSVN_SALE:"Reservation & Sales & Marketing",SEC:"Security",ENG:"Engineer",GSC:"GSC",BANQUET:"Banquet"},c={ADMIN:"Admin",IT_ADMIN:"IT Admin",ENGINEER_ADMIN:"Engineer Admin",USER:"User",FRONT_OFFICE:"Front Office",BACK_OFFICE:"Back Office",ACCOUNTING:"Accounting",ENGINEER:"Engineer",GSC:"GSC",FB:"F&B",RSVN_SALE:"Reservation & Sales & Marketing",HR:"Human Resource",HK:"Housekeeping",EXE_AC:"Executive & Accounting",JURISTIC:"Juristic",SEC:"Security",KITCHEN:"Kitchen",BANQUET:"Banquet",ENG:"Engineer"}},13749,a=>{"use strict";a.s(["ChevronLeft",()=>b],13749);let b=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},84505,a=>{"use strict";a.s(["Download",()=>b],84505);let b=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},50522,70426,51460,77598,10586,13165,a=>{"use strict";a.s(["ChevronRight",()=>c],50522);var b=a.i(70106);let c=(0,b.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["FilterX",()=>d],70426);let d=(0,b.default)("funnel-x",[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]]);a.s(["exportToExcel",()=>f],51460);var e=a.i(75750);function f(a,b="export.xlsx"){let c=e.utils.book_new(),d=e.utils.json_to_sheet(a);if(a.length>0){let b=Object.keys(a[0]).map(b=>({wch:Math.min(Math.max(Math.max(b.length,...a.map(a=>String(a[b]||"").length)),10),50)}));d["!cols"]=b}e.utils.book_append_sheet(c,d,"Sheet1"),e.writeFile(c,b)}a.s(["ToastContainer",()=>n],77598);var g=a.i(87924),h=a.i(72131),i=a.i(33508);let j=(0,b.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var k=a.i(41710),l=a.i(50944);function m({notification:a,onClose:b}){let c=(0,l.useRouter)(),[d,e]=(0,h.useState)(!1),[f,m]=(0,h.useState)(100);(0,h.useEffect)(()=>{setTimeout(()=>e(!0),10);let a=setInterval(()=>{m(a=>Math.max(0,a-100/150))},100),b=setTimeout(()=>{n()},15e3);return()=>{clearTimeout(b),clearInterval(a)}},[]);let n=()=>{e(!1),setTimeout(b,300)},o="it"===a.type,p=o?"from-blue-500 via-blue-600 to-indigo-600":"from-orange-500 via-orange-600 to-red-600";return(0,g.jsxs)("div",{className:`fixed top-20 right-6 z-50 w-[420px] max-w-[calc(100vw-3rem)] bg-white rounded-2xl shadow-2xl border-2 ${o?"border-blue-400":"border-orange-400"} overflow-hidden transition-all duration-300 transform ${d?"opacity-100 translate-x-0 scale-100":"opacity-0 translate-x-full scale-95"}`,children:[(0,g.jsxs)("div",{className:`bg-gradient-to-r ${p} px-5 py-4 relative overflow-hidden`,children:[(0,g.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,g.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.8),transparent_50%)]"})}),(0,g.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:`${o?"bg-blue-100":"bg-orange-100"} ${o?"text-blue-600":"text-orange-600"} w-12 h-12 rounded-xl flex items-center justify-center shadow-lg transform transition-transform hover:scale-110`,children:(0,g.jsx)("span",{className:"text-2xl",children:o?"ðŸŽ«":"ðŸ”§"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"font-bold text-white text-base tracking-wide",children:o?"New IT Ticket":"New Engineer Ticket"}),(0,g.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,g.jsx)(k.Clock,{size:14,className:"text-white/80"}),(0,g.jsx)("span",{className:"text-white/90 text-xs font-medium",children:"Just now"})]})]})]}),(0,g.jsx)("button",{onClick:n,className:"text-white/90 hover:text-white hover:bg-white/20 rounded-lg p-2 transition-all duration-200 transform hover:scale-110","aria-label":"Close notification",children:(0,g.jsx)(i.X,{size:20,strokeWidth:2.5})})]})]}),(0,g.jsxs)("div",{className:"p-5 bg-gradient-to-b from-gray-50 to-white",children:[(0,g.jsx)("div",{className:"mb-3",children:(0,g.jsx)("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-bold ${o?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"} shadow-sm`,children:a.ticketNumber})}),(0,g.jsx)("h4",{className:"font-bold text-gray-900 text-lg mb-3 line-clamp-1 leading-tight",children:a.description||"No description"}),(0,g.jsxs)("div",{className:"space-y-2 mb-4",children:[a.location&&(0,g.jsxs)("div",{className:"flex items-start gap-2",children:[(0,g.jsx)("span",{className:"text-gray-500 text-xs font-semibold min-w-[80px]",children:"Area:"}),(0,g.jsx)("span",{className:"text-gray-700 text-sm font-medium flex-1",children:a.location})]}),a.typeOfDamage&&(0,g.jsxs)("div",{className:"flex items-start gap-2",children:[(0,g.jsx)("span",{className:"text-gray-500 text-xs font-semibold min-w-[80px]",children:"Type:"}),(0,g.jsx)("span",{className:"text-gray-700 text-sm font-medium flex-1",children:a.typeOfDamage})]}),a.title&&(0,g.jsxs)("div",{className:"flex items-start gap-2",children:[(0,g.jsx)("span",{className:"text-gray-500 text-xs font-semibold min-w-[80px]",children:"Location:"}),(0,g.jsx)("span",{className:"text-gray-600 text-sm flex-1 line-clamp-2",children:a.title})]})]}),(0,g.jsxs)("button",{onClick:()=>{let b="it"===a.type?`/dashboard/ticket/${a.ticketId}`:`/dashboard/engineer/ticket/${a.ticketId}`;c.push(b),n()},className:`w-full bg-gradient-to-r ${p} hover:shadow-lg text-white font-semibold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 group`,children:[(0,g.jsx)(j,{size:18,className:"group-hover:rotate-12 transition-transform"}),(0,g.jsx)("span",{children:"View Ticket Details"})]})]}),(0,g.jsx)("div",{className:"h-1.5 bg-gray-200 relative overflow-hidden",children:(0,g.jsx)("div",{className:`h-full ${o?"bg-blue-500":"bg-orange-500"} transition-all duration-100 ease-linear shadow-sm relative`,style:{width:`${f}%`},children:(0,g.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",style:{animation:"shimmer 2s infinite"}})})})]})}function n(){let[a,b]=(0,h.useState)([]),c=(0,h.useCallback)(a=>{b(b=>[...b,a]);try{let a=new Audio("/notification.mp3");a.volume=.5,a.play().catch(()=>{})}catch{}},[]);return(0,h.useEffect)(()=>{let a=a=>{a.detail&&c(a.detail)};return window.addEventListener("showToast",a),()=>{window.removeEventListener("showToast",a)}},[c]),(0,g.jsx)("div",{className:"fixed top-0 right-0 z-50 pointer-events-none p-4",children:(0,g.jsx)("div",{className:"pointer-events-auto space-y-4",children:a.map((a,c)=>(0,g.jsx)("div",{style:{marginTop:8*c,animationDelay:`${100*c}ms`},children:(0,g.jsx)(m,{notification:a,onClose:()=>{var c;return c=a.id,void b(a=>a.filter(a=>a.id!==c))}})},a.id))})})}function o(a,b,c){let{onNewTicket:d}=c,e=(0,h.useCallback)(()=>{let c;if(!b)return null;let f=new EventSource("/api/sse");return f.onmessage=b=>{try{let c=JSON.parse(b.data);if("keepalive"===c.type)return;let e="it"===a?"new_it_ticket":"new_engineer_ticket";if(c.type===e){d();let b=c.data;window.dispatchEvent(new CustomEvent("showToast",{detail:{id:`${a}-${b.id}-${Date.now()}`,type:a,ticketNumber:b.ticketNumber,title:b.title,description:b.description,ticketId:b.id,area:b.area,location:b.location,typeOfDamage:b.typeOfDamage}}))}}catch(a){console.error("Error parsing SSE message:",a)}},f.onerror=()=>{console.log("SSE connection error, reconnecting..."),f?.close(),c=setTimeout(()=>e(),5e3)},{eventSource:f,reconnectTimeout:c}},[b,a,d]);(0,h.useEffect)(()=>{let a=e();return()=>{a?.eventSource?.close(),a?.reconnectTimeout&&clearTimeout(a.reconnectTimeout)}},[e])}function p({rows:a=5}){return(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("div",{className:"grid grid-cols-8 gap-4 p-4 bg-green-50 rounded-t-2xl border border-green-100",children:Array.from({length:8}).map((a,b)=>(0,g.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"},b))}),(0,g.jsx)("div",{className:"bg-white rounded-b-2xl border-x border-b border-green-100",children:Array.from({length:a}).map((a,b)=>(0,g.jsxs)("div",{className:"grid grid-cols-8 gap-4 p-4 border-b border-green-100 last:border-b-0",children:[(0,g.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-20"}),(0,g.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),(0,g.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),(0,g.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),(0,g.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}),(0,g.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse flex-1"})]}),(0,g.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),(0,g.jsx)("div",{className:"h-6 bg-gray-200 rounded-full animate-pulse w-20"})]},b))})]})}a.s(["useSSENotifications",()=>o],10586),a.s(["TableSkeleton",()=>p],13165)}];

//# sourceMappingURL=_56df20be._.js.map