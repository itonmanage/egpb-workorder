(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,859,e=>{"use strict";async function r(e,r,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{var a;let i=new FormData;t.forEach(e=>i.append("file",e)),i.append("ticketId",r),i.append("isAdminUpload",String(n)),"engineer"===e&&i.append("type","engineer");let o=await fetch("/api/upload",{method:"POST",body:i}),c=await o.json();if(!o.ok||!c.success)throw Error(c.error||"Upload failed");let s=((null==(a=c.data)?void 0:a.images)||[]).map(e=>e.url);return{success:!0,imageUrls:s}}catch(e){return console.error("Error uploading images:",e),{success:!1,imageUrls:[],error:e instanceof Error?e.message:"Unknown error occurred"}}}async function t(e,r){try{let t=await fetch("engineer"===e?"/api/engineer-tickets/".concat(r):"/api/tickets/".concat(r));if(!t.ok)throw Error("Failed to fetch ticket images");let n=await t.json();if(!n.success||!n.data)throw Error("Invalid response format");let a=n.data.ticket||n.data;return((null==a?void 0:a.images)||[]).map(e=>{var r,t;let n=e.originalName||(null==(t=e.imageUrl)||null==(r=t.split("/"))?void 0:r.pop())||"image.jpg";return{...e,is_completion_image:e.isCompletion,is_admin_upload:e.isCompletion,ticket_id:e.ticketId,image_url:e.imageUrl,image_name:n,file_name:n,file_path:e.imageUrl,created_at:e.createdAt}})}catch(e){return console.error("Error fetching images:",e),[]}}async function n(e,r,t){try{let n=await fetch("/api/upload?imageId=".concat(r,"&filePath=").concat(encodeURIComponent(t)).concat("engineer"===e?"&type=engineer":""),{method:"DELETE"});if(!n.ok){let e=await n.json();throw Error(e.error||"Delete failed")}return{success:!0}}catch(e){return console.error("Error deleting image:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}async function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r("it",e,t,n)}async function i(e){return t("it",e)}async function o(e,r){return n("it",e,r)}async function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r("engineer",e,t,n)}async function s(e){return t("engineer",e)}async function l(e,r){return n("engineer",e,r)}e.s(["deleteEngineerTicketImage",()=>l,"deleteImage",()=>n,"deleteTicketImage",()=>o,"getEngineerTicketImages",()=>s,"getImages",()=>t,"getTicketImages",()=>i,"uploadEngineerTicketImages",()=>c,"uploadImages",()=>r,"uploadTicketImages",()=>a])}]);