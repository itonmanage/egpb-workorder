(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44215,99749,e=>{"use strict";function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}e.s(["apiClient",()=>s],44215),e.s(["_",()=>t],99749);let s=new class{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=await fetch("".concat(this.baseUrl,"/api").concat(e),{...t,headers:{"Content-Type":"application/json",...t.headers},credentials:"include"}),r=await s.json();if(!s.ok){if(401===s.status&&"/"!==window.location.pathname&&"/login"!==window.location.pathname)return window.location.href="/login",{success:!1,error:"Session expired. Redirecting to login..."};return{success:!1,error:r.error||"An error occurred"}}return{success:!0,data:r.data||r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}constructor(){t(this,"baseUrl",void 0),t(this,"auth",{signIn:async(e,t)=>this.request("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})}),signOut:async()=>this.request("/auth/logout",{method:"POST"}),getUser:async()=>this.request("/auth/me"),signUp:async(e,t,s)=>this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,username:t,password:s})})}),t(this,"tickets",{list:async e=>{let t=new URLSearchParams;return e&&Object.keys(e).forEach(s=>{let r=e[s];void 0!==r&&""!==r&&t.append(s,String(r))}),this.request("/tickets?".concat(t))},get:async e=>{var t;let s=await this.request("/tickets/".concat(e));if(!s.success)return s;let r=null==(t=s.data)?void 0:t.ticket;return r?{success:!0,data:r}:{success:!1,error:"Invalid ticket response"}},create:async e=>{var t;let s=await this.request("/tickets",{method:"POST",body:JSON.stringify(e)});if(!s.success)return s;let r=null==(t=s.data)?void 0:t.ticket;return r?{success:!0,data:r}:{success:!1,error:"Invalid ticket response"}},update:async(e,t)=>{var s;let r=await this.request("/tickets/".concat(e),{method:"PATCH",body:JSON.stringify(t)});if(!r.success)return r;let n=null==(s=r.data)?void 0:s.ticket;return n?{success:!0,data:n}:{success:!1,error:"Invalid ticket response"}},delete:async e=>this.request("/tickets/".concat(e),{method:"DELETE"}),markAllRead:async()=>this.request("/tickets/mark-read",{method:"POST"})}),t(this,"engineerTickets",{list:async e=>{let t=new URLSearchParams;return e&&Object.keys(e).forEach(s=>{let r=e[s];void 0!==r&&""!==r&&t.append(s,String(r))}),this.request("/engineer-tickets?".concat(t))},get:async e=>{var t;let s=await this.request("/engineer-tickets/".concat(e));if(!s.success)return s;let r=null==(t=s.data)?void 0:t.ticket;return r?{success:!0,data:r}:{success:!1,error:"Invalid engineer ticket response"}},create:async e=>{var t;let s=await this.request("/engineer-tickets",{method:"POST",body:JSON.stringify(e)});if(!s.success)return s;let r=null==(t=s.data)?void 0:t.ticket;return r?{success:!0,data:r}:{success:!1,error:"Invalid engineer ticket response"}},update:async(e,t)=>{var s;let r=await this.request("/engineer-tickets/".concat(e),{method:"PATCH",body:JSON.stringify(t)});if(!r.success)return r;let n=null==(s=r.data)?void 0:s.ticket;return n?{success:!0,data:n}:{success:!1,error:"Invalid engineer ticket response"}},markAllRead:async()=>this.request("/engineer-tickets/mark-read",{method:"POST"})}),t(this,"users",{list:async e=>{let t=new URLSearchParams;return e&&Object.keys(e).forEach(s=>{let r=e[s];void 0!==r&&""!==r&&t.append(s,String(r))}),this.request("/users?".concat(t))},get:async e=>this.request("/users/".concat(e)),create:async e=>this.request("/users",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>this.request("/users/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),delete:async e=>this.request("/users/".concat(e),{method:"DELETE"})}),t(this,"stats",{summary:async e=>{let t=new URLSearchParams;return(null==e?void 0:e.from)&&t.append("from",e.from),(null==e?void 0:e.to)&&t.append("to",e.to),(null==e?void 0:e.type)&&t.append("type",e.type),this.request("/stats/summary?".concat(t.toString()))},damageTypes:async e=>{let t=new URLSearchParams;return t.append("month",e.month.toString()),t.append("year",e.year.toString()),t.append("type",e.type),this.request("/stats/damage-types?".concat(t.toString()))}}),this.baseUrl=""}}},18566,(e,t,s)=>{t.exports=e.r(76562)},21719,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(71645),s=e.i(44215),r=e.i(18566);function n(){let e=(0,r.useRouter)(),n=(0,t.useRef)(null),a=(0,t.useRef)(Date.now()),i=(0,t.useCallback)(async()=>{if(Date.now()-a.current<18e5){a.current=Date.now(),n.current&&clearTimeout(n.current),n.current=setTimeout(i,18e5);return}console.log("Session timed out due to inactivity.");try{await s.apiClient.auth.signOut(),e.push("/login?timeout=true")}catch(t){console.error("Logout failed:",t),e.push("/login?timeout=true")}},[e]),c=(0,t.useCallback)(()=>{a.current=Date.now(),n.current&&clearTimeout(n.current),n.current=setTimeout(i,18e5)},[i]);return(0,t.useEffect)(()=>{c();let e=["mousedown","mousemove","keypress","scroll","touchstart","click"],t=null,s=()=>{t||(t=setTimeout(()=>{c(),t=null},1e3))};return e.forEach(e=>{window.addEventListener(e,s)}),()=>{n.current&&clearTimeout(n.current),t&&clearTimeout(t),e.forEach(e=>{window.removeEventListener(e,s)})}},[c]),null}}]);