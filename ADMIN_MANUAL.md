# คู่มือผู้ดูแลระบบ (Admin Manual) - EGPB Ticket System

เอกสารฉบับนี้จัดทำขึ้นเพื่อแนะนำการใช้งานสำหรับผู้ดูแลระบบ (Admin) ในการจัดการระบบ Tikcet System รวมถึงการตั้งค่าส่วนต่างๆ ของระบบ

---

## สารบัญ

1. [การจัดการผู้ใช้งาน (User Management)](#1-การจัดการผู้ใช้งาน-user-management)
2. [การจัดการตั๋วงาน (Ticket Management)](#2-การจัดการตั๋วงาน-ticket-management)
3. [การดูรายงานสรุป (Dashboard Summary)](#3-การดูรายงานสรุป-dashboard-summary)
4. [การตั้งค่าระบบ (System Configuration)](#4-การตั้งค่าระบบ-system-configuration)
    - [การเพิ่ม/แก้ไข "Type of Damage" (ประเภทความเสียหาย)](#41-การเพิ่มแก้ไข-type-of-damage)
    - [การเปลี่ยนไฟล์เสียงแจ้งเตือน](#42-การเปลี่ยนไฟล์เสียงแจ้งเตือน)

---

## 1. การจัดการผู้ใช้งาน (User Management)

ผู้ดูแลระบบสามารถจัดการบัญชีผู้ใช้งานได้ทั้งหมดผ่านหน้า **Manage Users**

### 1.1 การเข้าสู่หน้าจัดการผู้ใช้งาน
1. เข้าสู่ระบบด้วยบัญชีที่มีสิทธิ์ **Admin** หรือ **IT Admin**
2. ไปที่ Dashboard หลัก
3. คลิกที่ปุ่มเมนู หรือไปที่ URL `/dashboard/users`

### 1.2 การเพิ่มผู้ใช้งานใหม่ (Add User)
1. คลิกปุ่ม **"+ Add User"** มุมขวาบน
2. กรอกข้อมูลให้ครบถ้วน:
    - **Username**: ชื่อผู้ใช้ (ภาษาอังกฤษ)
    - **Full Name**: ชื่อ-นามสกุลจริง
    - **Position**: ตำแหน่งงาน
    - **Department**: แผนก (เช่น Engineer, IT, HR)
    - **Telephone Ext**: เบอร์ต่อภายใน
    - **Role**: สิทธิ์การใช้งาน (Admin, User, Engineer, etc.)
    - **Password**: รหัสผ่าน
3. กดปุ่ม **Create User**

### 1.3 การแก้ไขและลบผู้ใช้งาน
- **แก้ไข**: คลิกไอคอน **Edit** (รูปดินสอ) หลังชื่อผู้ใช้งานที่ต้องการแก้ไข สามารถเปลี่ยน Role หรือ Reset Password ได้
- **ลบ**: คลิกไอคอน **Delete** (รูปถังขยะ) เพื่อลบบัญชี
- **ลบหลายคน**: ติ๊กถูกหน้าชื่อผู้ใช้ที่ต้องการ แล้วกดปุ่มสีแดง **Delete Selected** ด้านบน

### 1.4 การ Export ข้อมูลผู้ใช้
- คลิกปุ่ม **"Export Users"** เพื่อดาวน์โหลดรายชื่อผู้ใช้งานทั้งหมดเป็นไฟล์ `.csv` (เปิดด้วย Excel ได้)

---

## 2. การจัดการตั๋วงาน (Ticket Management)

### 2.1 การเปลี่ยนสถานะงาน (Update Status)
เมื่อได้รับแจ้งงาน Admin หรือ Engineer สามารถเปลี่ยนสถานะงานได้ที่หน้าละเอียดของ Ticket นั้นๆ:

1. **New (งานใหม่)**: สถานะเริ่มต้น
2. **On Process (กำลังดำเนินการ)**: เมื่อเริ่มทำงาน ให้เปลี่ยนเป็นสถานะนี้
3. **On Hold (รอ)**: ใช้กรณีรออะไหล่ หรือรอข้อมูลเพิ่มเติม (ต้องระบุเหตุผลในช่อง Admin Notes)
4. **Done (เสร็จสิ้น)**: เมื่องานเสร็จสมบูรณ์ (ต้องระบุชื่อผู้รับผิดชอบในช่อง Assign To)
5. **Cancel (ยกเลิก)**: กรณีต้องการยกเลิกใบงาน (ต้องระบุเหตุผล)

### 2.2 การรับงาน (Assign To)
- ก่อนเปลี่ยนสถานะเป็น **Done** ระบบจะบังคับให้ระบุชื่อผู้รับผิดชอบงานในช่อง **"Assign to"** และกดปุ่มบันทึก (Save) ก่อนเสมอ

---

## 3. การดูรายงานสรุป (Dashboard Summary)

ระบบมีหน้าสรุปผลการทำงานแยกตามฝ่าย:
- **IT Summary**: `/dashboard/summary`
- **Engineer Summary**: `/dashboard/engineer/summary`

หน้านี้จะแสดงกราฟสถิติต่างๆ เช่น:
- จำนวนงานทั้งหมดประจำเดือน
- งานที่ค้างอยู่ (Open Tickets)
- ประเภทความเสียหายที่พบบ่อย (Top Damage Types)
- ประสิทธิภาพการปิดงาน

---

## 4. การตั้งค่าระบบ (System Configuration)

เนื่องจากระบบถูกออกแบบมาให้มีความเสถียรและรวดเร็ว การตั้งค่าบางอย่าง (Config) จะถูกกำหนดไว้ใน Code (Hardcoded) เพื่อความปลอดภัยและความถูกต้องของข้อมูล การแก้ไขจำเป็นต้องแก้ที่ไฟล์ต้นฉบับและอัปเดตระบบ

### 4.1 การเพิ่ม/แก้ไข "Type of Damage"

รายการ "ประเภทความเสียหาย" (Type of Damage) ในหน้าแจ้งหนี ถูกกำหนดไว้ในไฟล์ `lib/constants.ts`

**วิธีแก้ไข:**
1. เปิดไฟล์ `f:\ticket-form-app\lib\constants.ts` ด้วยโปรแกรมแก้ไข Text หรือ VS Code
2. ค้นหาตัวแปรที่ต้องการแก้ไข:
    - สำหรับ **IT**: ค้นหา `IT_DAMAGE_TYPES`
    - สำหรับ **Engineer**: ค้นหา `ENGINEER_DAMAGE_TYPES`
3. เพิ่มข้อความที่ต้องการลงในวงเล็บ `[ ... ]` ภายใต้เครื่องหมาย `' '` และคั่นด้วยลูกน้ำ `,`

**ตัวอย่างโค้ด (IT_DAMAGE_TYPES):**
```typescript
export const IT_DAMAGE_TYPES = [
    'Hardware',
    'Network',
    'Software',
    'New Damage Type',  // <--- เพิ่มรายการใหม่ตรงนี้
    'Other',
] as const;
```

4. บันทึกไฟล์ที่แก้ไข (Save)
5. ทำการ Build และ Restart ระบบใหม่เพื่อให้การเปลี่ยนแปลงมีผล
   - เปิด Terminal แล้วพิมพ์คำสั่ง:
     ```powershell
     npm run build
     pm2 restart ticket-app
     ```

### 4.2 การเปลี่ยนไฟล์เสียงแจ้งเตือน

ระบบมีไฟล์เสียงแจ้งเตือนเมื่อมี Ticket ใหม่เข้ามา ชื่อไฟล์คือ `notification.mp3`

**วิถีเปลี่ยนเสียง:**
1. เตรียมไฟล์เสียงที่ต้องการ (นามสกุล `.mp3` เท่านั้น) แนะนำความยาวไม่เกิน 2-3 วินาที
2. เปลี่ยนชื่อไฟล์เป็น `notification.mp3`
3. นำไปวางทับไฟล์เดิมที่โฟลเดอร์:
   `f:\ticket-form-app\public\notification.mp3`
4. รีเฟรชหน้าเว็บ (F5) เพื่อให้ Browser โหลดไฟล์เสียงใหม่

> **ข้อแนะนำ:** หากเปลี่ยนไฟล์แล้วเสียงยังเป็นแบบเดิม ให้ลอง Clear Cache ของ Browser หรือลองเปิดใน Incognito Mode เพื่อทดสอบ

---

*จบเอกสารแนะนำการใช้งาน*
